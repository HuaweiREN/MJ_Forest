{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\PopUpScript/assets\\Script\\PopUpScript\\cPopUpRestart.js"],"names":["cc","Class","extends","Component","properties","_goBackFlag","_prtName","Node","onShow","PrtName","FabInfo","Hint","setHint","listenToSwitch","node","active","getChildByName","on","EventType","TOUCH_END","event","bind","onHide","removeFromParent","onConfirmClick","emitDataPack","emitID","emitData","GlobalFuncVar","gameFlag","restartAllGame","eventAfterSync_Restart","getComponent","onFadeOut","rcvDataPack","rcvData","CallPopUp","onCancelClick","Label","string","start","update","dt","off"],"mappings":";;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAa,KADL;AAERC,kBAAUN,GAAGO;AAFL,KAHP;;AAQL;;AAEA;;AAEAC,YAAQ,gBAASC,OAAT,EAAkBC,OAAlB,EAA2BC,IAA3B,EAAgC;AACpC,aAAKL,QAAL,GAAgBG,OAAhB;AACA,aAAKG,OAAL,CAAaD,IAAb;AACA,aAAKE,cAAL;AACA,aAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACH,KAjBI;;AAmBL;AACAF,kBApBK,4BAoBW;AACZ,aAAKC,IAAL,CAAUE,cAAV,CAAyB,WAAzB,EAAsCC,EAAtC,CAAyCjB,GAAGO,IAAH,CAAQW,SAAR,CAAkBC,SAA3D,EAAsE,UAAUC,KAAV,EAAgB;AAClF,iBAAKf,WAAL,GAAmB,IAAnB;AACH,SAFqE,CAEpEgB,IAFoE,CAE/D,IAF+D,CAAtE,EAEc,IAFd;AAGH,KAxBI;;;AA0BLC,YAAQ,kBAAU;AACd,aAAKR,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACA,aAAKD,IAAL,CAAUS,gBAAV,CAA2B,IAA3B,EAFc,CAEoB;AACrC,KA7BI;;AA+BL;AACAC,oBAAgB,0BAAU;AACtB,YAAIC,eAAe;AACfC,oBAAQ,CAAC,EAAD,CADO;AAEfC,sBAAU,CAACC,cAAcC,QAAd,CAAuBC,cAAxB;AAFK,SAAnB;AAIA;AACAF,sBAAcD,QAAd,CAAuB,EAAvB,EAA2BF,YAA3B,EAAyC,KAAKM,sBAAL,CAA4BV,IAA5B,CAAiC,IAAjC,CAAzC;;AAEA,YAAIP,OAAO,KAAKA,IAAL,CAAUkB,YAAV,CAAuB,gBAAvB,CAAX;AACAlB,aAAKmB,SAAL;AACA;AACH,KA3CI;;AA6CL;AACAF,0BA9CK,kCA8CkBG,WA9ClB,EA8C8B;AAC/B,YAAIA,WAAJ,EAAgB;AACZ,iBAAK5B,QAAL,CAAciB,gBAAd,CAA+B,IAA/B;AACAK,0BAAcC,QAAd,CAAuBC,cAAvB,GAAwCI,YAAYC,OAAZ,CAAoB,CAApB,CAAxC;AACH,SAHD,MAGO;AACHP,0BAAcQ,SAAd,CAAwB,KAAKtB,IAA7B,EAAmC,YAAnC,EAAiD,CAAC,kBAAD,EAAoB,IAApB,CAAjD;AACH;AAEJ,KAtDI;;;AAyDL;AACAuB,mBAAe,yBAAU;AACrB,YAAIvB,OAAO,KAAKA,IAAL,CAAUkB,YAAV,CAAuB,gBAAvB,CAAX;AACAlB,aAAKmB,SAAL;AACA;AACH,KA9DI;;AAgEL;AACArB,WAjEK,mBAiEGD,IAjEH,EAiEQ;AACT,YAAIA,QAAQ,IAAZ,EAAiB;AACbA,mBAAO,CAAC,YAAD,EAAe,SAAf,CAAP;AACH;AACD,aAAKG,IAAL,CAAUE,cAAV,CAAyB,MAAzB,EAAiCA,cAAjC,CAAgD,KAAhD,EAAuDgB,YAAvD,CAAoEhC,GAAGsC,KAAvE,EAA8EC,MAA9E,GAAuF5B,KAAK,CAAL,CAAvF;AACH,KAtEI;AAwEL6B,SAxEK,mBAwEI,CAER,CA1EI;;;AA4EL;AACAC,UA7EK,kBA6EGC,EA7EH,EA6EO;AACR,YAAI,KAAKrC,WAAL,IAAoB,IAAxB,EAA6B;AACzB,iBAAKgC,aAAL;AACA,iBAAKvB,IAAL,CAAUE,cAAV,CAAyB,WAAzB,EAAsC2B,GAAtC,CAA0C3C,GAAGO,IAAH,CAAQW,SAAR,CAAkBC,SAA5D;AACA,iBAAKd,WAAL,GAAmB,KAAnB;AACH;AACJ;AAnFI,CAAT","file":"cPopUpRestart.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\PopUpScript","sourcesContent":["\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _goBackFlag: false,\r\n        _prtName: cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    onShow: function(PrtName, FabInfo, Hint){\r\n        this._prtName = PrtName;\r\n        this.setHint(Hint);\r\n        this.listenToSwitch();\r\n        this.node.active = true;\r\n    },\r\n    \r\n    //// 20200304\r\n    listenToSwitch(){\r\n        this.node.getChildByName(\"maskLayer\").on(cc.Node.EventType.TOUCH_END, function (event){\r\n            this._goBackFlag = true;\r\n        }.bind(this), this);\r\n    },\r\n\r\n    onHide: function(){\r\n        this.node.active = false;\r\n        this.node.removeFromParent(true); //while closing the alert window, remove the content node\r\n    },\r\n\r\n    //// 20200304\r\n    onConfirmClick: function(){\r\n        var emitDataPack = {\r\n            emitID: [71],\r\n            emitData: [GlobalFuncVar.gameFlag.restartAllGame],\r\n        };\r\n        //GlobalFuncVar.emitData(34, emitDataPack).then(this.eventAfterSync_Restart.bind(this)).catch(err => {console.log(err)});\r\n        GlobalFuncVar.emitData(34, emitDataPack, this.eventAfterSync_Restart.bind(this));\r\n\r\n        var node = this.node.getComponent(\"cFadeInFadeOut\");\r\n        node.onFadeOut();\r\n        //this.onHide();\r\n    },\r\n\r\n    //// 20200302\r\n    eventAfterSync_Restart(rcvDataPack){\r\n        if (rcvDataPack){\r\n            this._prtName.removeFromParent(true);\r\n            GlobalFuncVar.gameFlag.restartAllGame = rcvDataPack.rcvData[0];\r\n        } else {\r\n            GlobalFuncVar.CallPopUp(this.node, \"PopUpType1\", [\"网络出现问题啦~\\n请稍后再试~\",\"好的\"]);\r\n        }\r\n        \r\n    },\r\n\r\n\r\n    //// 20200304\r\n    onCancelClick: function(){\r\n        var node = this.node.getComponent(\"cFadeInFadeOut\");\r\n        node.onFadeOut();\r\n        //this.onHide();\r\n    },\r\n\r\n    //// 20200304\r\n    setHint(Hint){\r\n        if (Hint == null){\r\n            Hint = [\"出错啦！收集BUG中\", \"再给我一次机会\"];\r\n        };\r\n        this.node.getChildByName(\"root\").getChildByName(\"tip\").getComponent(cc.Label).string = Hint[0];\r\n    },\r\n    \r\n    start () {\r\n\r\n    },\r\n\r\n    //// 20200304\r\n    update (dt) {\r\n        if (this._goBackFlag == true){\r\n            this.onCancelClick();\r\n            this.node.getChildByName(\"maskLayer\").off(cc.Node.EventType.TOUCH_END);\r\n            this._goBackFlag = false;\r\n        };\r\n    },\r\n});\r\n"]}