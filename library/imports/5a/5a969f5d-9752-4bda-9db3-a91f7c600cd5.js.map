{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\ContentScript/assets\\Script\\ContentScript\\cPetDining.js"],"names":["cc","Class","extends","Component","properties","_petExpe","Node","_barNow","_petExpeValue","_petLevel","_feedVolume","_feedVolumeValue","_feedVolumePercentage","_foodHoldVolume","_feedConfirm","_datapetExpeValueNow","_datapetLevel","_datafoodHoldVolume","_datafeedValue","onLoad","start","setNodeandData","node","getChildByName","_feedHandler","onShow","PrtName","FabInfo","active","setDefaultValue","setTimeout","GlobalFuncVar","ShowDemoText","bind","onHide","removeFromParent","userPetInfo","petExpeValueNow","petLevel","userInfo","foodHoldVolume","getComponent","Widget","isAbsoluteRight","right","petExpeTotNow","Label","string","Slider","progress","updateFeedDataTemp","_datafeedMax","handleMaxPosX","handlePosRate","Math","round","onClickFeedConfirmBtn","gameFlag","TutorialStep","CallPopUp","Button","interactable","emitDataPack","emitID","emitData","eventAfterSync_notLevelUp","eventAfterSync_LevelUp","rcvDataPack","rcvData","petInfoUpdate","userResUpdate","update","dt"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAUL,GAAGM,IADL;AAERC,iBAASP,GAAGM,IAFJ;AAGRE,uBAAeR,GAAGM,IAHV;AAIRG,mBAAWT,GAAGM,IAJN;AAKRI,qBAAaV,GAAGM,IALR;AAMRK,0BAAkBX,GAAGM,IANb;AAORM,+BAAuBZ,GAAGM,IAPlB;AAQRO,yBAAiBb,GAAGM,IARZ;AASRQ,sBAAcd,GAAGM,IATT;AAURS,8BAAsB,IAVd;AAWRC,uBAAe,IAXP;AAYRC,6BAAqB,IAZb;AAaRC,wBAAiB;AACjB;AAdQ,KAHP;;AAoBL;;AAEAC,UAtBK,oBAsBK,CACT,CAvBI;AAyBLC,SAzBK,mBAyBI,CAER,CA3BI;;;AA6BL;AACAC,kBA9BK,4BA8BW;AACZ,aAAKhB,QAAL,GAAgB,KAAKiB,IAAL,CAAUC,cAAV,CAAyB,SAAzB,CAAhB;AACA,aAAKhB,OAAL,GAAe,KAAKF,QAAL,CAAckB,cAAd,CAA6B,QAA7B,CAAf;AACA,aAAKf,aAAL,GAAqB,KAAKH,QAAL,CAAckB,cAAd,CAA6B,cAA7B,CAArB;AACA,aAAKd,SAAL,GAAiB,KAAKa,IAAL,CAAUC,cAAV,CAAyB,UAAzB,CAAjB;AACA,aAAKb,WAAL,GAAmB,KAAKY,IAAL,CAAUC,cAAV,CAAyB,YAAzB,CAAnB;AACA,aAAKC,YAAL,GAAoB,KAAKd,WAAL,CAAiBa,cAAjB,CAAgC,QAAhC,CAApB;AACA,aAAKX,qBAAL,GAA6B,KAAKY,YAAL,CAAkBD,cAAlB,CAAiC,sBAAjC,CAA7B;AACA,aAAKZ,gBAAL,GAAwB,KAAKW,IAAL,CAAUC,cAAV,CAAyB,iBAAzB,EAA4CA,cAA5C,CAA2D,iBAA3D,CAAxB;AACA,aAAKV,eAAL,GAAuB,KAAKS,IAAL,CAAUC,cAAV,CAAyB,gBAAzB,EAA2CA,cAA3C,CAA0D,qBAA1D,CAAvB;AACA,aAAKT,YAAL,GAAoB,KAAKQ,IAAL,CAAUC,cAAV,CAAyB,aAAzB,CAApB;AACA;;;;;;;;AAUH,KAnDI;AAoDLE,UApDK,kBAoDEC,OApDF,EAoDWC,OApDX,EAoDmB;AACpB,aAAKL,IAAL,CAAUM,MAAV,GAAmB,IAAnB;AACA,aAAKP,cAAL;AACA,aAAKQ,eAAL;;AAEAC,mBAAW,YAAY;AACnBC,0BAAcC,YAAd,CAA2B,IAA3B,EAAiC,6BAAjC,EAAgE,GAAhE;AACJ;AACC,SAHU,CAGTC,IAHS,CAGJ,IAHI,CAAX,EAGc,IAHd;AAIH,KA7DI;AA8DLC,UA9DK,oBA8DG;AACJ,aAAKZ,IAAL,CAAUM,MAAV,GAAmB,KAAnB;AACA,aAAKN,IAAL,CAAUa,gBAAV,CAA2B,IAA3B,EAFI,CAE8B;AACrC,KAjEI;;AAkEL;AACAN,mBAnEK,6BAmEY;AACb,aAAKd,oBAAL,GAA4BgB,cAAcK,WAAd,CAA0BC,eAAtD;AACA,aAAKrB,aAAL,GAAqBe,cAAcK,WAAd,CAA0BE,QAA/C;AACA,aAAKrB,mBAAL,GAA2Bc,cAAcQ,QAAd,CAAuBC,cAAlD;AACA;;AAEA,aAAKjC,OAAL,CAAakC,YAAb,CAA0BzC,GAAG0C,MAA7B,EAAqCC,eAArC,GAAuD,KAAvD;AACA,YAAIZ,cAAcK,WAAd,CAA0BC,eAA1B,IAA6C,CAAjD,EAAoD;AAChD,iBAAK9B,OAAL,CAAakC,YAAb,CAA0BzC,GAAG0C,MAA7B,EAAqCE,KAArC,GAA6C,CAA7C;AACH,SAFD,MAEO;AACH,iBAAKrC,OAAL,CAAakC,YAAb,CAA0BzC,GAAG0C,MAA7B,EAAqCE,KAArC,GAA6C,KAAMb,cAAcK,WAAd,CAA0BC,eAA1B,GAA4CN,cAAcK,WAAd,CAA0BS,aAAvE,GAAsF,IAAtF,GAA2F,GAAhG,CAA7C;AACH;;AAED,aAAKrC,aAAL,CAAmBiC,YAAnB,CAAgCzC,GAAG8C,KAAnC,EAA0CC,MAA1C,GAAmD,KAAKhC,oBAAL,GAA2B,GAA3B,GAAgCgB,cAAcK,WAAd,CAA0BS,aAA7G;AACA,aAAKpC,SAAL,CAAegC,YAAf,CAA4BzC,GAAG8C,KAA/B,EAAsCC,MAAtC,GAA+C,SAAS,KAAK/B,aAA7D;AACA,aAAKN,WAAL,CAAiB+B,YAAjB,CAA8BzC,GAAGgD,MAAjC,EAAyCC,QAAzC,GAAoD,CAApD;;AAEA,aAAKtC,gBAAL,CAAsB8B,YAAtB,CAAmCzC,GAAG8C,KAAtC,EAA6CC,MAA7C,GAAsD,CAAtD;AACA,aAAKnC,qBAAL,CAA2B6B,YAA3B,CAAwCzC,GAAG8C,KAA3C,EAAkDC,MAAlD,GAA2D,IAA3D;AACA,aAAKlC,eAAL,CAAqB4B,YAArB,CAAkCzC,GAAG8C,KAArC,EAA4CC,MAA5C,GAAqD,KAAK9B,mBAA1D;;AAEA,aAAKC,cAAL,GAAsB,CAAtB;AACH,KAzFI;;AA0FL;AACAgC,sBA3FK,gCA2Fe;AAChB,aAAKC,YAAL,GAAoBpB,cAAcK,WAAd,CAA0BS,aAA1B,GAA0Cd,cAAcK,WAAd,CAA0BC,eAAxF;AACA,YAAIe,gBAAgB,KAAKD,YAAL,GAAoBpB,cAAcQ,QAAd,CAAuBC,cAA/D;AACA,YAAIa,gBAAgB,KAAK3C,WAAL,CAAiB+B,YAAjB,CAA8BzC,GAAGgD,MAAjC,EAAyCC,QAA7D;AACA,aAAK/B,cAAL,GAAsBoC,KAAKC,KAAL,CAAWF,gBAAgB,KAAKpC,mBAAhC,CAAtB;AACA,aAAKF,oBAAL,GAA4BgB,cAAcK,WAAd,CAA0BC,eAA1B,GAA4C,KAAKnB,cAA7E;AACA,aAAKX,OAAL,CAAakC,YAAb,CAA0BzC,GAAG0C,MAA7B,EAAqCC,eAArC,GAAuD,KAAvD;;AAEA,YAAI,KAAKzB,cAAL,GAAsB,KAAKiC,YAA/B,EAA4C;AACxC,iBAAK3C,aAAL,CAAmBiC,YAAnB,CAAgCzC,GAAG8C,KAAnC,EAA0CC,MAA1C,GAAmD,KAAKhC,oBAAL,GAA2B,GAA3B,GAAgCgB,cAAcK,WAAd,CAA0BS,aAA7G;AACA,gBAAI,KAAK9B,oBAAL,IAA6B,CAAjC,EAAoC;AAChC,qBAAKR,OAAL,CAAakC,YAAb,CAA0BzC,GAAG0C,MAA7B,EAAqCE,KAArC,GAA6C,CAA7C;AACH,aAFD,MAEO;AACH,qBAAKrC,OAAL,CAAakC,YAAb,CAA0BzC,GAAG0C,MAA7B,EAAqCE,KAArC,GAA6C,KAAM,KAAK7B,oBAAL,GAA4BgB,cAAcK,WAAd,CAA0BS,aAAvD,GAAsE,IAAtE,GAA2E,GAAhF,CAA7C;AACH;AACD,iBAAKlC,gBAAL,CAAsB8B,YAAtB,CAAmCzC,GAAG8C,KAAtC,EAA6CC,MAA7C,GAAsD,KAAK7B,cAA3D;AACA,gBAAI,KAAKD,mBAAL,IAA4B,CAAhC,EAAkC;AAC9B,qBAAKL,qBAAL,CAA2B6B,YAA3B,CAAwCzC,GAAG8C,KAA3C,EAAkDC,MAAlD,GAA2D,IAA3D;AACH,aAFD,MAEO;AACH,qBAAKnC,qBAAL,CAA2B6B,YAA3B,CAAwCzC,GAAG8C,KAA3C,EAAkDC,MAAlD,GAA2DO,KAAKC,KAAL,CAAW,KAAKrC,cAAL,GAAoB,KAAKD,mBAAzB,GAA6C,GAAxD,IAA+D,GAA1H;AACH;AACD,iBAAKJ,eAAL,CAAqB4B,YAArB,CAAkCzC,GAAG8C,KAArC,EAA4CC,MAA5C,GAAqD,KAAK9B,mBAAL,GAA2B,KAAKC,cAArF;AAGH,SAhBD,MAgBO,IAAI,KAAKA,cAAL,IAAuB,KAAKiC,YAAhC,EAA6C;AAChD,iBAAK3C,aAAL,CAAmBiC,YAAnB,CAAgCzC,GAAG8C,KAAnC,EAA0CC,MAA1C,GAAmDhB,cAAcK,WAAd,CAA0BS,aAA1B,GAAyC,GAAzC,GAA8Cd,cAAcK,WAAd,CAA0BS,aAA3H;AACA,iBAAKnC,WAAL,CAAiB+B,YAAjB,CAA8BzC,GAAGgD,MAAjC,EAAyCC,QAAzC,GAAoDG,aAApD;AACA,iBAAK7C,OAAL,CAAakC,YAAb,CAA0BzC,GAAG0C,MAA7B,EAAqCE,KAArC,GAA6C,CAA7C;AACA,iBAAKjC,gBAAL,CAAsB8B,YAAtB,CAAmCzC,GAAG8C,KAAtC,EAA6CC,MAA7C,GAAsD,KAAKI,YAA3D;AACA,gBAAI,KAAKlC,mBAAL,IAA4B,CAAhC,EAAkC;AAC9B,qBAAKL,qBAAL,CAA2B6B,YAA3B,CAAwCzC,GAAG8C,KAA3C,EAAkDC,MAAlD,GAA2D,IAA3D;AACH,aAFD,MAEO;AACH,qBAAKnC,qBAAL,CAA2B6B,YAA3B,CAAwCzC,GAAG8C,KAA3C,EAAkDC,MAAlD,GAA2DO,KAAKC,KAAL,CAAW,KAAKJ,YAAL,GAAkB,KAAKlC,mBAAvB,GAA2C,GAAtD,IAA6D,GAAxH;AACH;AACD,iBAAKJ,eAAL,CAAqB4B,YAArB,CAAkCzC,GAAG8C,KAArC,EAA4CC,MAA5C,GAAqD,KAAK9B,mBAAL,GAA2B,KAAKkC,YAArF;AAEH;AACJ,KAhII;;;AAkIL;AACAK,yBAnIK,mCAmIkB;AACnB,YAAIzB,cAAc0B,QAAd,CAAuBC,YAAvB,IAAuC,IAA3C,EAAgD;AAC5C3B,0BAAc4B,SAAd,CAAwB,KAAKrC,IAA7B,EAAkC,YAAlC,EAA+C,CAAC,yCAAD,EAA2C,IAA3C,CAA/C;AACH,SAFD,MAEO,IAAIS,cAAcK,WAAd,CAA0BE,QAA1B,IAAsC,EAA1C,EAA6C;AAChDP,0BAAc4B,SAAd,CAAwB,KAAKrC,IAA7B,EAAkC,YAAlC,EAA+C,CAAC,gBAAD,EAAkB,IAAlB,CAA/C;AACH,SAFM,MAEA;AACH,iBAAKR,YAAL,CAAkB2B,YAAlB,CAA+BzC,GAAG4D,MAAlC,EAA0CC,YAA1C,GAAyD,KAAzD;AACA,iBAAKrC,YAAL,CAAkBI,MAAlB,GAA2B,KAA3B;AACA,gBAAIG,cAAcQ,QAAd,CAAuBC,cAAvB,IAAyC,CAA7C,EAA+C;AAC3CT,8BAAc4B,SAAd,CAAwB,KAAKrC,IAA7B,EAAkC,YAAlC,EAA+C,CAAC,gBAAD,EAAkB,IAAlB,CAA/C;AACA,qBAAKO,eAAL;AACA,qBAAKf,YAAL,CAAkB2B,YAAlB,CAA+BzC,GAAG4D,MAAlC,EAA0CC,YAA1C,GAAyD,IAAzD;AACA,qBAAKrC,YAAL,CAAkBI,MAAlB,GAA2B,IAA3B;AACH,aALD,MAKO,IAAI,KAAKV,cAAL,IAAuB,CAA3B,EAA6B;AAChCa,8BAAc4B,SAAd,CAAwB,KAAKrC,IAA7B,EAAkC,YAAlC,EAA+C,CAAC,cAAD,EAAgB,IAAhB,CAA/C;AACA,qBAAKO,eAAL;AACA,qBAAKf,YAAL,CAAkB2B,YAAlB,CAA+BzC,GAAG4D,MAAlC,EAA0CC,YAA1C,GAAyD,IAAzD;AACA,qBAAKrC,YAAL,CAAkBI,MAAlB,GAA2B,IAA3B;AACH,aALM,MAKA,IAAI,KAAKV,cAAL,GAAsB,KAAKiC,YAA/B,EAA4C;AAC/C,oBAAIW,eAAe;AACfC,4BAAQ,CAAC,CAAD,EAAG,EAAH,EAAM,EAAN,CADO;AAEfC,8BAAU,CAACjC,cAAcQ,QAAd,CAAuBC,cAAxB,EAAwC,KAAKtB,cAA7C,EAA6Da,cAAcK,WAAd,CAA0BC,eAAvF;AAFK,iBAAnB;AAIA;AACAN,8BAAciC,QAAd,CAAuB,EAAvB,EAA2BF,YAA3B,EAAyC,KAAKG,yBAAL,CAA+BhC,IAA/B,CAAoC,IAApC,CAAzC;AACH,aAPM,MAOA,IAAI,KAAKf,cAAL,IAAuB,KAAKiC,YAAhC,EAA8C;AACjD,oBAAIW,eAAe;AACfC,4BAAQ,CAAC,CAAD,EAAG,EAAH,EAAM,EAAN,EAAS,EAAT,CADO;AAEfC,8BAAU,CAACjC,cAAcQ,QAAd,CAAuBC,cAAxB,EAAyCT,cAAcK,WAAd,CAA0BC,eAAnE,EAAoF,KAAKc,YAAzF,EAAuGpB,cAAcK,WAAd,CAA0BE,QAAjI;AAFK,iBAAnB;AAIA;AACAP,8BAAciC,QAAd,CAAuB,EAAvB,EAA2BF,YAA3B,EAAyC,KAAKI,sBAAL,CAA4BjC,IAA5B,CAAiC,IAAjC,CAAzC;AACH;;AAED,iBAAKiB,kBAAL;AACH;AACJ,KAvKI;AAyKLe,6BAzKK,qCAyKqBE,WAzKrB,EAyKiC;AAClC,YAAIA,WAAJ,EAAgB;AACZpC,0BAAcQ,QAAd,CAAuBC,cAAvB,GAAwC2B,YAAYC,OAAZ,CAAoB,CAApB,CAAxC;AACArC,0BAAcK,WAAd,CAA0BC,eAA1B,GAA4C8B,YAAYC,OAAZ,CAAoB,CAApB,CAA5C;AACArC,0BAAc4B,SAAd,CAAwB,KAAKrC,IAA7B,EAAkC,YAAlC,EAA+C,CAAC,oBAAkB,KAAKJ,cAAvB,GAAsC,GAAvC,EAA2C,IAA3C,CAA/C;AACAa,0BAAc0B,QAAd,CAAuBY,aAAvB,GAAuC,IAAvC;AACAtC,0BAAc0B,QAAd,CAAuBa,aAAvB,GAAuC,IAAvC;AACA,iBAAKzC,eAAL;AACA,iBAAKL,YAAL,CAAkBI,MAAlB,GAA2B,IAA3B;AACA,iBAAKd,YAAL,CAAkB2B,YAAlB,CAA+BzC,GAAG4D,MAAlC,EAA0CC,YAA1C,GAAyD,IAAzD;AACH,SATD,MASO;AACH9B,0BAAc4B,SAAd,CAAwB,KAAKrC,IAA7B,EAAmC,YAAnC,EAAiD,CAAC,kBAAD,EAAoB,IAApB,CAAjD;AACA,iBAAKE,YAAL,CAAkBI,MAAlB,GAA2B,IAA3B;AACA,iBAAKd,YAAL,CAAkB2B,YAAlB,CAA+BzC,GAAG4D,MAAlC,EAA0CC,YAA1C,GAAyD,IAAzD;AACH;AAEJ,KAzLI;AA2LLK,0BA3LK,kCA2LkBC,WA3LlB,EA2L8B;AAC/B,YAAIA,WAAJ,EAAgB;AACZpC,0BAAcQ,QAAd,CAAuBC,cAAvB,GAAwC2B,YAAYC,OAAZ,CAAoB,CAApB,CAAxC;AACArC,0BAAcK,WAAd,CAA0BC,eAA1B,GAA4C8B,YAAYC,OAAZ,CAAoB,CAApB,CAA5C;AACArC,0BAAcK,WAAd,CAA0BE,QAA1B,GAAqC6B,YAAYC,OAAZ,CAAoB,CAApB,CAArC;AACArC,0BAAc4B,SAAd,CAAwB,KAAKrC,IAA7B,EAAkC,YAAlC,EAA+C,CAAC,sBAAD,EAAwB,IAAxB,CAA/C;AACAS,0BAAc0B,QAAd,CAAuBY,aAAvB,GAAuC,IAAvC;AACAtC,0BAAc0B,QAAd,CAAuBa,aAAvB,GAAuC,IAAvC;AACA,iBAAKzC,eAAL;AACA,iBAAKL,YAAL,CAAkBI,MAAlB,GAA2B,IAA3B;AACA,iBAAKd,YAAL,CAAkB2B,YAAlB,CAA+BzC,GAAG4D,MAAlC,EAA0CC,YAA1C,GAAyD,IAAzD;AACH,SAVD,MAUO;AACH9B,0BAAc4B,SAAd,CAAwB,KAAKrC,IAA7B,EAAmC,YAAnC,EAAiD,CAAC,kBAAD,EAAoB,IAApB,CAAjD;AACA,iBAAKE,YAAL,CAAkBI,MAAlB,GAA2B,IAA3B;AACA,iBAAKd,YAAL,CAAkB2B,YAAlB,CAA+BzC,GAAG4D,MAAlC,EAA0CC,YAA1C,GAAyD,IAAzD;AACH;AACJ,KA3MI;;;AA6ML;AACAU,UA9MK,kBA8MGC,EA9MH,EA8MO;AACR;AACA,aAAKtB,kBAAL;AACA;AAEH;AAnNI,CAAT","file":"cPetDining.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\ContentScript","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _petExpe: cc.Node,\r\n        _barNow: cc.Node,\r\n        _petExpeValue: cc.Node,\r\n        _petLevel: cc.Node,\r\n        _feedVolume: cc.Node,\r\n        _feedVolumeValue: cc.Node,\r\n        _feedVolumePercentage: cc.Node,\r\n        _foodHoldVolume: cc.Node,\r\n        _feedConfirm: cc.Node,\r\n        _datapetExpeValueNow: null,\r\n        _datapetLevel: null,\r\n        _datafoodHoldVolume: null,\r\n        _datafeedValue : null,\r\n        //_handlerFlag: null,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    //// 20200302\r\n    setNodeandData(){\r\n        this._petExpe = this.node.getChildByName(\"petExpe\");\r\n        this._barNow = this._petExpe.getChildByName(\"barNow\");\r\n        this._petExpeValue = this._petExpe.getChildByName(\"petExpeValue\");\r\n        this._petLevel = this.node.getChildByName(\"petLevel\");\r\n        this._feedVolume = this.node.getChildByName(\"feedVolume\");\r\n        this._feedHandler = this._feedVolume.getChildByName(\"Handle\");\r\n        this._feedVolumePercentage = this._feedHandler.getChildByName(\"feedVolumePercentage\");\r\n        this._feedVolumeValue = this.node.getChildByName(\"feedVolumeValue\").getChildByName(\"feedVolumeValue\");\r\n        this._foodHoldVolume = this.node.getChildByName(\"foodHoldVolume\").getChildByName(\"foodHoldVolumeValue\");\r\n        this._feedConfirm = this.node.getChildByName(\"feedConfirm\");\r\n        /*\r\n        this._feedHandler.on(cc.Node.EventType.TOUCH_START, function (event){\r\n            //this._handlerFlag = true;\r\n        }.bind(this));\r\n        this._feedHandler.on(cc.Node.EventType.TOUCH_END, function (event){\r\n           //this._handlerFlag = false;\r\n        }.bind(this));\r\n        */\r\n\r\n\r\n    },\r\n    onShow(PrtName, FabInfo){\r\n        this.node.active = true;\r\n        this.setNodeandData();\r\n        this.setDefaultValue();\r\n\r\n        setTimeout(function () {\r\n            GlobalFuncVar.ShowDemoText(this, \"训练师小贴士：请逐级给我投喂哦~一次吃太多会噎到哒！~\", 120);\r\n        // 20200224 改动，4000 --> 3000\r\n        }.bind(this), 2000);\r\n    },\r\n    onHide(){\r\n        this.node.active = false;\r\n        this.node.removeFromParent(true); //while closing the alert window, remove the content node\r\n    },\r\n    //// 20200302\r\n    setDefaultValue(){\r\n        this._datapetExpeValueNow = GlobalFuncVar.userPetInfo.petExpeValueNow;\r\n        this._datapetLevel = GlobalFuncVar.userPetInfo.petLevel;\r\n        this._datafoodHoldVolume = GlobalFuncVar.userInfo.foodHoldVolume;\r\n        //this._handlerFlag = false;\r\n\r\n        this._barNow.getComponent(cc.Widget).isAbsoluteRight = false;\r\n        if (GlobalFuncVar.userPetInfo.petExpeValueNow == 0) {\r\n            this._barNow.getComponent(cc.Widget).right = 1;\r\n        } else {\r\n            this._barNow.getComponent(cc.Widget).right = 1 - ((GlobalFuncVar.userPetInfo.petExpeValueNow / GlobalFuncVar.userPetInfo.petExpeTotNow)*0.90+0.1);\r\n        };\r\n\r\n        this._petExpeValue.getComponent(cc.Label).string = this._datapetExpeValueNow +\"/\"+ GlobalFuncVar.userPetInfo.petExpeTotNow;\r\n        this._petLevel.getComponent(cc.Label).string = \"Lv. \" + this._datapetLevel;\r\n        this._feedVolume.getComponent(cc.Slider).progress = 0;\r\n\r\n        this._feedVolumeValue.getComponent(cc.Label).string = 0;\r\n        this._feedVolumePercentage.getComponent(cc.Label).string = \"0%\";\r\n        this._foodHoldVolume.getComponent(cc.Label).string = this._datafoodHoldVolume;  \r\n\r\n        this._datafeedValue = 0;      \r\n    },\r\n    //// 20200301\r\n    updateFeedDataTemp(){\r\n        this._datafeedMax = GlobalFuncVar.userPetInfo.petExpeTotNow - GlobalFuncVar.userPetInfo.petExpeValueNow;\r\n        let handleMaxPosX = this._datafeedMax / GlobalFuncVar.userInfo.foodHoldVolume;\r\n        let handlePosRate = this._feedVolume.getComponent(cc.Slider).progress;\r\n        this._datafeedValue = Math.round(handlePosRate * this._datafoodHoldVolume);\r\n        this._datapetExpeValueNow = GlobalFuncVar.userPetInfo.petExpeValueNow + this._datafeedValue;\r\n        this._barNow.getComponent(cc.Widget).isAbsoluteRight = false;\r\n\r\n        if (this._datafeedValue < this._datafeedMax){\r\n            this._petExpeValue.getComponent(cc.Label).string = this._datapetExpeValueNow +\"/\"+ GlobalFuncVar.userPetInfo.petExpeTotNow;\r\n            if (this._datapetExpeValueNow == 0) {\r\n                this._barNow.getComponent(cc.Widget).right = 1;\r\n            } else {\r\n                this._barNow.getComponent(cc.Widget).right = 1 - ((this._datapetExpeValueNow / GlobalFuncVar.userPetInfo.petExpeTotNow)*0.90+0.1);\r\n            };\r\n            this._feedVolumeValue.getComponent(cc.Label).string = this._datafeedValue;\r\n            if (this._datafoodHoldVolume == 0){\r\n                this._feedVolumePercentage.getComponent(cc.Label).string = \"0%\";\r\n            } else {\r\n                this._feedVolumePercentage.getComponent(cc.Label).string = Math.round(this._datafeedValue/this._datafoodHoldVolume*100) + \"%\";\r\n            };\r\n            this._foodHoldVolume.getComponent(cc.Label).string = this._datafoodHoldVolume - this._datafeedValue;\r\n            \r\n            \r\n        } else if (this._datafeedValue >= this._datafeedMax){\r\n            this._petExpeValue.getComponent(cc.Label).string = GlobalFuncVar.userPetInfo.petExpeTotNow +\"/\"+ GlobalFuncVar.userPetInfo.petExpeTotNow;\r\n            this._feedVolume.getComponent(cc.Slider).progress = handleMaxPosX;\r\n            this._barNow.getComponent(cc.Widget).right = 0;\r\n            this._feedVolumeValue.getComponent(cc.Label).string = this._datafeedMax;\r\n            if (this._datafoodHoldVolume == 0){\r\n                this._feedVolumePercentage.getComponent(cc.Label).string = \"0%\";\r\n            } else {\r\n                this._feedVolumePercentage.getComponent(cc.Label).string = Math.round(this._datafeedMax/this._datafoodHoldVolume*100) + \"%\";\r\n            };\r\n            this._foodHoldVolume.getComponent(cc.Label).string = this._datafoodHoldVolume - this._datafeedMax;\r\n            \r\n        }\r\n    },\r\n\r\n    //// 20200302\r\n    onClickFeedConfirmBtn(){\r\n        if (GlobalFuncVar.gameFlag.TutorialStep != null){\r\n            GlobalFuncVar.CallPopUp(this.node,\"PopUpType1\",[\"这里是我的投喂按钮哦~\\n有了主人细心的关怀与照顾\\n我一定会健壮茁壮成长的！\",\"好的\"]);\r\n        } else if (GlobalFuncVar.userPetInfo.petLevel == 50){\r\n            GlobalFuncVar.CallPopUp(this.node,\"PopUpType1\",[\"我已到达Demo项目满级啦~\",\"好的\"]);\r\n        } else {\r\n            this._feedConfirm.getComponent(cc.Button).interactable = false;\r\n            this._feedHandler.active = false;\r\n            if (GlobalFuncVar.userInfo.foodHoldVolume == 0){\r\n                GlobalFuncVar.CallPopUp(this.node,\"PopUpType1\",[\"我们没粮食啦！肚子饿肚子饿！\",\"好的\"]);\r\n                this.setDefaultValue();\r\n                this._feedConfirm.getComponent(cc.Button).interactable = true;\r\n                this._feedHandler.active = true;\r\n            } else if (this._datafeedValue == 0){\r\n                GlobalFuncVar.CallPopUp(this.node,\"PopUpType1\",[\"我张了嘴，你却没喂...\",\"好的\"]);\r\n                this.setDefaultValue();\r\n                this._feedConfirm.getComponent(cc.Button).interactable = true;\r\n                this._feedHandler.active = true;\r\n            } else if (this._datafeedValue < this._datafeedMax){\r\n                var emitDataPack = {\r\n                    emitID: [2,12,13],\r\n                    emitData: [GlobalFuncVar.userInfo.foodHoldVolume, this._datafeedValue, GlobalFuncVar.userPetInfo.petExpeValueNow],\r\n                };\r\n                //GlobalFuncVar.emitData(16, emitDataPack).then(this.eventAfterSync_notLevelUp.bind(this)).catch(err => {console.log(err)});\r\n                GlobalFuncVar.emitData(16, emitDataPack, this.eventAfterSync_notLevelUp.bind(this));\r\n            } else if (this._datafeedValue >= this._datafeedMax) {\r\n                var emitDataPack = {\r\n                    emitID: [2,13,14,15],\r\n                    emitData: [GlobalFuncVar.userInfo.foodHoldVolume,  GlobalFuncVar.userPetInfo.petExpeValueNow, this._datafeedMax, GlobalFuncVar.userPetInfo.petLevel],\r\n                };\r\n                //GlobalFuncVar.emitData(17, emitDataPack).then(this.eventAfterSync_LevelUp.bind(this)).catch(err => {console.log(err)});\r\n                GlobalFuncVar.emitData(17, emitDataPack, this.eventAfterSync_LevelUp.bind(this));\r\n            }\r\n\r\n            this.updateFeedDataTemp();\r\n        }\r\n    },\r\n\r\n    eventAfterSync_notLevelUp(rcvDataPack){\r\n        if (rcvDataPack){\r\n            GlobalFuncVar.userInfo.foodHoldVolume = rcvDataPack.rcvData[0];\r\n            GlobalFuncVar.userPetInfo.petExpeValueNow = rcvDataPack.rcvData[2];\r\n            GlobalFuncVar.CallPopUp(this.node,\"PopUpType1\",[\"啊呜啊呜，真香！\\n(经验值+\"+this._datafeedValue+\")\",\"好的\"]);\r\n            GlobalFuncVar.gameFlag.petInfoUpdate = true;\r\n            GlobalFuncVar.gameFlag.userResUpdate = true;\r\n            this.setDefaultValue();\r\n            this._feedHandler.active = true;\r\n            this._feedConfirm.getComponent(cc.Button).interactable = true;\r\n        } else {\r\n            GlobalFuncVar.CallPopUp(this.node, \"PopUpType1\", [\"网络出现问题啦~\\n请稍后再试~\",\"好的\"]);\r\n            this._feedHandler.active = true;\r\n            this._feedConfirm.getComponent(cc.Button).interactable = true;\r\n        }\r\n        \r\n    },\r\n\r\n    eventAfterSync_LevelUp(rcvDataPack){\r\n        if (rcvDataPack){\r\n            GlobalFuncVar.userInfo.foodHoldVolume = rcvDataPack.rcvData[0];\r\n            GlobalFuncVar.userPetInfo.petExpeValueNow = rcvDataPack.rcvData[1];\r\n            GlobalFuncVar.userPetInfo.petLevel = rcvDataPack.rcvData[3];\r\n            GlobalFuncVar.CallPopUp(this.node,\"PopUpType1\",[\"我升级啦~\\n谢谢主人！\\n(等级+1)\",\"好的\"]);\r\n            GlobalFuncVar.gameFlag.petInfoUpdate = true;\r\n            GlobalFuncVar.gameFlag.userResUpdate = true;\r\n            this.setDefaultValue();\r\n            this._feedHandler.active = true;\r\n            this._feedConfirm.getComponent(cc.Button).interactable = true;\r\n        } else {\r\n            GlobalFuncVar.CallPopUp(this.node, \"PopUpType1\", [\"网络出现问题啦~\\n请稍后再试~\",\"好的\"]);\r\n            this._feedHandler.active = true;\r\n            this._feedConfirm.getComponent(cc.Button).interactable = true;\r\n        }\r\n    },\r\n\r\n    //// 20200302\r\n    update (dt) {\r\n        //if (this._handlerFlag == true){\r\n        this.updateFeedDataTemp();\r\n        //}\r\n        \r\n    },\r\n});\r\n"]}