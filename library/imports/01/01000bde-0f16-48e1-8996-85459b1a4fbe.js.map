{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\ContentScript/assets\\Script\\ContentScript\\cSync.js"],"names":["cc","Class","extends","Component","properties","updateStart","timeClock","_petIcon","_petLevel","_userGoldRes","Label","_userFoodRes","setNodeDefault","node","getChildByName","getComponent","ProgressBar","timeNoti","Sprite","GlobalFuncVar","SetPetSelfieIconUpdate","userPetInfo","petType","string","petLevel","userInfo","goldHoldVolume","foodHoldVolume","onShow","active","start","onClickSyncBtn","emitDataPack","emitID","emitData","sysDate","Minu","Secon","eventAfterSync_SyncBtn","bind","rcvDataPack","CallPopUp","onClickRestartBtn","ShowDemoText","CallPopUpRestart","updateProgressBar","progressBar","noti","dt","progress","update"],"mappings":"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","file":"cSync.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\ContentScript","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        updateStart: null,\r\n        timeClock: null,\r\n        _petIcon: null,\r\n        _petLevel: null,\r\n        _userGoldRes: cc.Label,\r\n        _userFoodRes: cc.Label,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    setNodeDefault(){\r\n        this.timeClock = this.node.getChildByName(\"syncLayout\").getChildByName(\"timeSync\").getChildByName(\"timeBox\").getChildByName(\"timeClock\").getChildByName(\"timeClockCounting\").getComponent(cc.ProgressBar);\r\n        this.timeNoti = this.node.getChildByName(\"syncLayout\").getChildByName(\"timeSync\").getChildByName(\"timeBox\").getChildByName(\"timeNoti\").getChildByName(\"timeBroadcast\").getComponent(cc.Label);\r\n        this._petIcon = this.node.getChildByName(\"syncLayout\").getChildByName(\"restartAll\").getChildByName(\"restartInfo\").getChildByName(\"petSelfie\").getComponent(cc.Sprite);\r\n        GlobalFuncVar.SetPetSelfieIconUpdate(GlobalFuncVar.userPetInfo.petType,this._petIcon,this);\r\n        this._petLevel = this.node.getChildByName(\"syncLayout\").getChildByName(\"restartAll\").getChildByName(\"restartInfo\").getChildByName(\"petLevelBg\").getChildByName(\"levelValue\").getComponent(cc.Label);\r\n        this._petLevel.string = \"Lv. \" + GlobalFuncVar.userPetInfo.petLevel;\r\n        this._userGoldRes = this.node.getChildByName(\"syncLayout\").getChildByName(\"restartAll\").getChildByName(\"restartInfo\").getChildByName(\"Res\").getChildByName(\"goldHoldVolume\").getComponent(cc.Label);\r\n        this._userFoodRes = this.node.getChildByName(\"syncLayout\").getChildByName(\"restartAll\").getChildByName(\"restartInfo\").getChildByName(\"Res\").getChildByName(\"foodHoldVolume\").getComponent(cc.Label);\r\n        this._userGoldRes.string = GlobalFuncVar.userInfo.goldHoldVolume;\r\n        this._userFoodRes.string = GlobalFuncVar.userInfo.foodHoldVolume;\r\n    },\r\n\r\n    onShow(){\r\n        this.updateStart = true;\r\n        this.setNodeDefault();\r\n        this.node.active = true;\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    onClickSyncBtn(){\r\n        var emitDataPack = {\r\n            emitID: [44,45],\r\n            emitData: [GlobalFuncVar.sysDate.Minu, GlobalFuncVar.sysDate.Secon],\r\n        };\r\n        //GlobalFuncVar.emitData(33, emitDataPack).then(this.eventAfterSync_SyncBtn.bind(this)).catch(err => {console.log(err)});\r\n        GlobalFuncVar.emitData(33, emitDataPack, this.eventAfterSync_SyncBtn.bind(this));\r\n\r\n    },\r\n\r\n    eventAfterSync_SyncBtn(rcvDataPack){\r\n        if (rcvDataPack == true){\r\n            GlobalFuncVar.CallPopUp(this.node, \"PopUpType1\", [\"时钟同步成功啦~\",\"好的\"]);\r\n        } else {\r\n            GlobalFuncVar.CallPopUp(this.node, \"PopUpType1\", [\"网络出现问题啦~\\n请稍后再试~\",\"好的\"]);\r\n        }\r\n    },\r\n\r\n    onClickRestartBtn(){\r\n        GlobalFuncVar.ShowDemoText(this, \"Demo小贴士：在Demo项目中不会重置萌鸡等级与玩家资源，请放心选用~\", 0);\r\n        GlobalFuncVar.CallPopUpRestart(this.node, \"PopUpType7\", [\"确定要重启训练师之路嘛？\\n萌鸡种类与活动将被重置哦~\"]);\r\n    },\r\n\r\n    updateProgressBar: function(progressBar, noti, dt){\r\n        var progress = progressBar.progress;\r\n        progress = (GlobalFuncVar.sysDate.Minu*60+GlobalFuncVar.sysDate.Secon)/3600;\r\n        noti.string = \"距离明天还有：\"+[59-GlobalFuncVar.sysDate.Minu]+\"'\"+[59-GlobalFuncVar.sysDate.Secon]+\"\\\"！\";\r\n        progressBar.progress = progress;\r\n    },\r\n\r\n    update (dt) {\r\n        if (this.updateStart == true){\r\n            this.updateProgressBar(this.timeClock, this.timeNoti, dt);\r\n        };\r\n    },\r\n});\r\n"]}